{"mappings":"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","sources":["src/EasyConfetti.js"],"sourcesContent":["class EasyConfetti {\n  #confetti;\n\n  #confettiCtx;\n\n  #container;\n\n  #confettiElements;\n\n  #sprinkler;\n\n  #confettiParams;\n\n  #colors;\n\n  #devicePixelRatio;\n\n  constructor(params = {}) {\n    this.#confetti = document.createElement('canvas');\n    this.#confetti.id = 'easy-confetti';\n\n    document.body.appendChild(this.#confetti);\n\n    this.#confettiCtx = this.#confetti.getContext('2d');\n    this.#container = null;\n    this.#confettiElements = [];\n    this.#sprinkler = document.getElementById('sprinkler');\n    this.#devicePixelRatio = window.devicePixelRatio || 1;\n\n    this.#confettiParams = {\n      particleCount: params.particleCount || 70,\n      particleSizeRange: params.particleSizeRange || { width: [5, 20], height: [10, 18] },\n      initialSpeed: params.initialSpeed || 25,\n      gravity: params.gravity || 0.65,\n      airResistance: params.airResistance || 0.08,\n      maxFallSpeed: params.maxFallSpeed || 6,\n      flipFrequency: params.flipFrequency || 0.017,\n      colors: params.colors || [\n        { front: '#FF5733', back: '#C70039' },\n        { front: '#DAF7A6', back: '#FFC300' },\n      ],\n    };\n\n    this.#colors = this.#confettiParams.colors;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  #rand = (min, max) => Math.random() * (max - min) + min;\n\n  #setupCanvas = () => {\n    const { clientWidth: w, clientHeight: h } = document.documentElement;\n\n    this.#container = { w, h };\n    this.#confetti.width = w * this.#devicePixelRatio;\n    this.#confetti.height = h * this.#devicePixelRatio;\n    this.#confetti.style.width = `${w}px`;\n    this.#confetti.style.height = `${h}px`;\n    this.#confettiCtx.scale(this.#devicePixelRatio, this.#devicePixelRatio);\n  };\n\n  #updateConfetti = () => {\n    const { w, h } = this.#container;\n\n    this.#confettiCtx.clearRect(0, 0, w, h);\n\n    this.#confettiElements.forEach((c) => {\n      c.update();\n\n      this.#confettiCtx.save();\n      this.#confettiCtx.translate(c.position.x, c.position.y);\n      this.#confettiCtx.rotate(c.rotation);\n\n      const width = c.dimensions.width * c.scale.x;\n      const height = c.dimensions.height * c.scale.y;\n\n      this.#confettiCtx.fillStyle = c.color;\n      this.#confettiCtx.fillRect(-0.5 * width, -0.5 * height, width, height);\n      this.#confettiCtx.restore();\n    });\n\n    this.#confettiElements = this.#confettiElements.filter((c) => c.position.y <= h && c.position.x > -0.5 * w && c.position.x < 1.5 * w);\n\n    requestAnimationFrame(this.#updateConfetti);\n  };\n\n  #addConfetti = () => {\n    const {\n      left, top, width, height,\n    } = this.#sprinkler.getBoundingClientRect();\n\n    const clickPosition = [left + width / 2, top + height / 2];\n\n    this.#confettiElements.push(\n      ...Array.from({ length: this.#confettiParams.particleCount }, () => this.#createConfettiElement(clickPosition)),\n    );\n  };\n\n  #createConfettiElement = (clickPosition) => {\n    const {\n      particleSizeRange, initialSpeed, flipFrequency, maxFallSpeed, airResistance, gravity,\n    } = this.#confettiParams;\n\n    const randomModifier = this.#rand(-1, 1);\n    const colorPair = this.#colors[Math.floor(this.#rand(0, this.#colors.length))];\n\n    const dimensions = {\n      width: this.#rand(particleSizeRange.width[0], particleSizeRange.width[1]),\n      height: this.#rand(particleSizeRange.height[0], particleSizeRange.height[1]),\n    };\n\n    const position = { x: clickPosition[0], y: clickPosition[1] };\n    const rotation = this.#rand(0, 2 * Math.PI);\n    const scale = { x: 1, y: 1 };\n\n    const velocity = {\n      x: this.#rand(-initialSpeed, initialSpeed) * 0.4,\n      y: this.#rand(-initialSpeed, initialSpeed),\n    };\n\n    const flipSpeed = this.#rand(0.2, 1.5) * flipFrequency;\n    const terminalVelocity = this.#rand(1, 1.5) * maxFallSpeed;\n\n    if (position.y <= this.#container.h) {\n      velocity.y = -Math.abs(velocity.y);\n    }\n\n    return {\n      randomModifier,\n      colorPair,\n      dimensions,\n      position,\n      rotation,\n      scale,\n      velocity,\n      flipSpeed,\n      terminalVelocity,\n      update() {\n        this.velocity.x *= 0.98;\n        this.position.x += this.velocity.x;\n        this.velocity.y += randomModifier * airResistance;\n        this.velocity.y += gravity;\n        this.velocity.y = Math.min(this.velocity.y, terminalVelocity);\n        this.position.y += this.velocity.y;\n        this.scale.y = Math.cos((this.position.y + randomModifier) * this.flipSpeed);\n        this.color = this.scale.y > 0 ? this.colorPair.front : this.colorPair.back;\n      },\n    };\n  };\n\n  #hideConfetti = () => {\n    this.#confettiElements = [];\n\n    cancelAnimationFrame(this.#updateConfetti);\n  };\n\n  #debounce = (func, wait) => {\n    let timeout;\n\n    return (...args) => {\n      clearTimeout(timeout);\n\n      timeout = setTimeout(() => func.apply(this, args), wait);\n    };\n  };\n\n  init = () => {\n    this.#setupCanvas();\n    this.#updateConfetti();\n\n    window.addEventListener('resize', this.#debounce(() => {\n      this.#setupCanvas();\n      this.#hideConfetti();\n    }, 200));\n  };\n\n  sprink = this.#addConfetti;\n}\n\nexport default EasyConfetti;\n"],"names":[],"version":3,"file":"easy-confetti.js.map"}